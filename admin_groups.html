<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     
    
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="  crossorigin="anonymous"></script>    
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.min.js"></script>
    
    <script type="text/javascript" src="vendor/swag/lib/swag.js"></script> 


    <script type="text/javascript" src="js/data.js"></script> 



    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/user.css" rel="stylesheet"> 
    
    
<script>
$(document).ready(function(){   
    
    var template = Handlebars.compile($("#groups-admin-template").html());
    $("#content").append(template(data));    


    var template = Handlebars.compile($("#groups-admin-group-detail-template").html());
    $("#content-edit").append(template(data.groups[0]));


    var template = Handlebars.compile($("#groups-admin-group-detail-template").html());
    $("#content-add").append(template(data.groups[100]));

    $("#content-edit").hide();
    $("#content-add").hide();

$( ".group_admin-save--toggle").click(function() {
        $("#content-edit").hide();
        $("#content-add").hide();
        return false;
});

$( ".group_admin-edit_group--toggle").click(function() {
        $("#content-edit").toggle();
        return false;
});   

$( ".group_admin-add_group--toggle").click(function() {
        $("#content-add").toggle();
        return false;

});
    
    
    $(".group_admin-add_note").hide();
    $( ".group_admin-add_note--toggle").click(function() {
        $(".group_admin-add_note").toggle();
        return false;
    });    

    $( ".group_admin-save_note").click(function() {
        $(".group_admin-add_note").toggle();
        return false;
    });  

});
   
</script>


  
    </head>
<body>
<div class="container"> 
<h2> <img src="img/logo.png" height="50"> Advocacy Commons </h2> 
<hr>



<div id="content-edit"></div>
<div id="content-add"></div>
<div id="content"></div>



<script id="groups-admin-template" type="text/x-handlebars-template">

    <h2>Manage Local Groups</h2>

<button class="btn btn-primary pull-right group_admin-add_group--toggle"><i class="fa fa-plus"></i> Add a new group</button>
<input placeholder="Enter Search Term"> <button class="btn btn-primary btn-small"><i class="fa fa-search"></i>  Search Groups</button>


 <table class="table table-striped">
    <thead>
        <th>Name</th>
        <th>City</th>
        <th>State</th>
        <th>Description</th>
        <th>Public Contact</th>
        <th>Leaders</th>
        <th>Internal Notes</th>
        <th>Status</th>

    </thead>
    <tbody>
        {{#each groups}}
        <tr>        
            <td><a href="#" data-id="{{id}}" class="group_admin-edit_group--toggle">{{name}}</a></td>            
            <td>{{city}}</td>            
            <td>{{region}}</td>            
            <td class="col-md-2"><small>{{description}}</small></td>

         
            <td>
                <small>
                {{contact_name}}
                {{#if contact_phone}}<br>{{contact_phone}}{{/if}}
                {{#if contact_email}}<br><a href="mailto:{{contact_email}}">{{contact_email}}</a>{{/if}}
                <br>
                </small>
                {{#if website_url}}<a href="{{website_url}}" target="_blank" title="{{website_url}}"><i class="fa fa-globe"></i></a>{{/if}}
                {{#if twitter}}<a href="https://twitter.com/{{twitter}}" target="_blank" title="{{twitter}}"><i class="fa fa-twitter"></i></a>{{/if}}
                {{#if facebook_page_url}}<a href="{{facebook_page_url}}" target="_blank" title="{{facebook_page_url}}"><i class="fa fa-facebook"></i></a>{{/if}}
           
           
           </td>
           <td class="col-md-2">
            {{#each leaders}}
           
                {{#if facebook_id}}<a href="https://facebook.com/{{facebook_id}}" target="_blank" title="https://facebook.com/{{facebook_id}}"><img src="http://graph.facebook.com/{{facebook_id}}/picture?type=square&amp;height=20&amp;width=20"></a> {{/if}}<a href="#" data-id="{{id}}">{{name}}</a><br>
            {{/each}}
            </td>


                
            <td>{{#each notes}}
               {{#if note}}<small>{{note}} ({{date_created}}: {{admin_user}})</small><br><br>{{/if}}
            {{/each}}
            <div class="pull-right"><small><a href="#" class="group_admin-add_note--toggle"><i class="fa fa-plus"></i> Add Note</a></small></div>
            <div class="group_admin-add_note">
                <textarea rows="2" placeholder="Add Note"></textarea><button class="btn btn-xs btn-primary group_admin-save_note">Save Note</button>
                
            </div>
            </td>

            <td>
                {{status}}<br><br>
               <!-- <button class="btn btn-xs btn-success">approve</button> -->          
                <button class="btn btn-xs btn-danger" data-id={{id}}>unpublish</button>            
                <!--<button class="btn btn-xs btn-warning">publish</button>-->
            </td>            


        </tr>
        {{/each}}
    </tbody>
</table>




</script>

<script id="groups-admin-group-detail-template" type="text/x-handlebars-template">
    
  <h2>Add/Edit Group Details</h2>  
    
           


            
            <div class="row">

            <div class="form-group col-md-7 ">
                <label for=""><i class="fa fa-bullhorn"></i> Group Name</label>
                <input type="text" class="form-control" id="group_details-name" value="{{name}}">
                
                <br><div class="row">
                    
                    
                    {{#if leaders}}<div class="col-md-6">                    <b><i class="fa fa-user-circle"></i> Leaders:</b>
                    {{#each leaders}}
                    <a href="" class="group_details-leader"><img src="http://graph.facebook.com/{{facebook_id}}/picture?type=square&height=20&width=20"> {{name}}</a>
                    {{/each}} </div>{{/if}}
                    
                    <div class="col-md-6">
                        <div class="pull-right">
                        <a href=""><i class="fa fa-plus"></i> add existing leader</a> | <a href=""><i class="fa fa-user-plus"></i> add new leader</a>
                    </div>
                    </div>                    
                </div>
                
                

                                       


            </div>

            <div class="form-group col-md-5 ">
                <label for=""><i class="fa fa-commenting-o"></i> Group Description</label>
                <textarea  class="form-control" id="group_details-description" rows=4>{{description}}</textarea>
                
            </div>
    
            </div>            

            <div class="row">
                    <div class="form-group col-md-4">
                        <label for="">City</label>
                        <input type="text" class="form-control" id="group_details-contact_city" value="{{city}}">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="">State</label>
                        <input type="text" class="form-control" id="group_details-contact_region" value="{{region}}">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="">Zip Code</label>
                        <input type="text" class="form-control" id="group_details-contact_zip" value="{{zip}}">
                    </div>
            </div>

          
           <br> 
            
            <div class="row">
                    <div class="form-group col-md-4">
                        <label for=""><i class="fa fa-user"></i> Public Group Contact Name</label>
                        <input type="text" class="form-control" id="group_details-contact_name" value="{{contact_name}}">
                    </div>
                    <div class="form-group col-md-4">
                        <label for=""><i class="fa fa-phone"></i> Public Group Contact Phone</label>
                        <input type="text" class="form-control" id="group_details-contact_phone" value="{{contact_phone}}">
                    </div>
                    <div class="form-group col-md-4">
                        <label for=""><i class="fa fa-envelope"></i> Public Group Contact Email</label>
                        <input type="text" class="form-control" id="group_details-contact_email" value="{{contact_email}}">
                    </div>
            </div>
       

           <br> 
            <div class="row">

                <div class="form-group col-md-4">
                    <label for=""><i class="fa fa-facebook"></i>  Facebook Group URL</label>
                    <input type="text" class="form-control" id="group_details-facebook_page_url" value="{{facebook_page_url}}">
                    <p class="help-block">Make sure to start with http:// or https://</p>
                </div>

                <div class="form-group col-md-4">
                    <label for=""><i class="fa fa-twitter"></i> Twitter Handel</label>
                    <input type="text" class="form-control" id="group_details-twitter" value="{{twitter}}">
                </div>

                <div class="form-group col-md-4">
                    <label for=""><i class="fa fa-globe"></i> Website URL</label>
                    <input type="text" class="form-control" id="group_details-website_url" value="{{website_url}}">
                    <p class="help-block">Make sure to start with http:// or https://</p>
                </div>

            </div>  
            <button class="g-button btn btn-lg btn-success group_admin-save--toggle "><i class="fa fa-save"></i> Save</button>
            
            {{#if notes}}
            <br><br>
            <h4>Group Notes</h4>
             <table class="table table-striped">
                <thead>
                    <th>Note</th>
                    <th>Date</th>
                    <th>Admin User</th>
                    <th></th>
                </thead>
                <tbody>
 
             {{#each notes}}
                   <tr>
                        <td>{{note}}</td>
                        <td>{{date_created}}</td>
                        <td>{{admin_user}}</td>
                        <td><a href="#" title="Delete this note"><i class="fa fa-trash"></i></a></td>
                    </tr>
                {{/each}}
                </tbody>
             </table>

            {{/if}}

            
        
   <hr>
   <br><br> 
</script>





</div>
</body>
</html>